<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,wght@1,400;1,700&family=Great+Vibes&family=Alice&display=swap');

        :root {
            --gold: #d4af37;
            --night-black: #000000;
        }

        .green {
            color: limegreen;
            text-decoration: none;
            font-style: italic;
            font-weight: bold;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: var(--night-black);
            color: white;
            font-family: 'Alice', serif;
            overflow: hidden;
        }

        #bg-video {
            position: fixed;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            z-index: 0;
            transform: translate(-50%, -50%);
            opacity: 0.15;
            object-fit: cover;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        #canvas-bg { z-index: 1; }

        .main-ui {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.8) 100%);
            z-index: 2;
        }

        .header {
            position: absolute;
            top: 4%;
            text-align: center;
            z-index: 100;
            width: 100%;
        }

        .ny-title {
            font-family: 'Bodoni Moda', serif;
            font-style: italic;
            font-size: clamp(1.8rem, 8vw, 3.5rem);
            background: linear-gradient(to bottom, #fff 20%, var(--gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -1px;
            margin: 0;
        }

        .year-badge {
            font-size: clamp(0.8rem, 3.5vw, 1.2rem);
            letter-spacing: 0.5em;
            color: var(--gold);
            text-transform: uppercase;
            margin-top: 0.4rem;
            display: block;
        }

        .heart-container {
            position: absolute;
            width: min(85vw, 550px);
            aspect-ratio: 1/1;
            z-index: 10;
            pointer-events: none;
        }

        #heart-canvas {
            width: 100%;
            height: 100%;
        }

        .text-safe-zone {
            position: fixed;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: min(80vw, 400px);
            height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            text-align: center;
            z-index: 999;
            overflow-y: auto;
            padding: 20px;
            pointer-events: auto;
            scrollbar-width: none;
        }
        
        .text-safe-zone::-webkit-scrollbar {
            display: none;
        }

        .poem-display {
            font-family: 'Alice', cursive;
            color: #ffffff;
            line-height: 1.6;
            font-size: clamp(1.2rem, 5vw, 2rem);
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.8), 0 2px 10px rgba(0, 0, 0, 1);
            white-space: pre-wrap;
            margin-bottom: 50px;
        }

        .fragment {
            position: absolute;
            width: clamp(120px, 20vw, 200px);
            aspect-ratio: 4/5;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(8px);
            opacity: 0;
            z-index: 5;
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Explosion entrance logic */
        .fragment.exploded {
            opacity: 0.7;
            pointer-events: auto;
        }

        .f1 { top: 15%; left: 3%; transform: scale(0) rotate(-20deg); }
        .f2 { bottom: 8%; left: 5%; transform: scale(0) rotate(15deg); }
        .f3 { top: 15%; right: 3%; transform: scale(0) rotate(20deg); }
        .f4 { bottom: 8%; right: 5%; transform: scale(0) rotate(-15deg); }

        .f1.exploded { transform: scale(1) rotate(-10deg); }
        .f2.exploded { transform: scale(1) rotate(6deg); }
        .f3.exploded { transform: scale(1) rotate(12deg); }
        .f4.exploded { transform: scale(1) rotate(-8deg); }

        .fragment:hover {
            opacity: 1 !important;
            transform: scale(1.15) rotate(0deg) translateZ(100px) !important;
            z-index: 50;
            border-color: var(--gold);
            box-shadow: 0 20px 50px rgba(212, 175, 55, 0.4);
        }

        .fragment img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
        }

        .cursor {
            display: inline-block;
            width: 3px;
            height: 1em;
            background: var(--gold);
            animation: blink 0.8s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        #start-overlay {
            position: fixed;
            inset: 0;
            background: var(--night-black);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 1s;
        }

        .btn-start {
            padding: 1rem 2.5rem;
            background: var(--gold);
            color: black;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 20px var(--gold);
        }
    </style>
</head>
<body>

    <video id="bg-video" autoplay  muted loop>
        <source src="media/elvira.mp4" type="video/mp4">
    </video>

    <div id="start-overlay">
        <audio src="media/myaudio.mp3" id="myAudio" loop></audio>
        <button class="btn-start" onclick="startApp()">Click to View</button>
        <h3 class="mt-4">Developed by <a href="https://tristechhub.org.rw" class="green">Tris Tech Hub</a></h3>
    </div>

    <canvas id="canvas-bg"></canvas>

    <div class="main-ui">
        <header class="header">
            <h1 class="ny-title">Happy New Year, My Love</h1>
            <span class="year-badge">2026</span>
        </header>

        <div class="fragment f1"><img src="media/elvira1.jpeg" alt="Memory"></div>
        <div class="fragment f2"><img src="media/elvira3.jpeg" alt="Memory"></div>
        <div class="fragment f3"><img src="media/elvira2.jpeg" alt="Memory"></div>
        <div class="fragment f4"><img src="media/elvira4.jpeg" alt="Memory"></div>

        <div class="heart-container">
            <canvas id="heart-canvas"></canvas>
        </div>

        <div class="text-safe-zone" id="scroll-container">
            <p id="poem-target" class="poem-display"></p>
        </div>
    </div>

    <script>
        let bgCanvas, bgCtx, heartCanvas, heartCtx;
        let stars = [], snowflakes = [], heartPoints = [], orbitingParticles = [];
        let width, height;
        let heartProgress = 0;
        let charIdx = 0;

        const poemLines = [
            "Happy New Year, my Elvira ‚ù§Ô∏è",
            "",
            "As this year closes, I find myself thinking about everything we‚Äôve been through",
            "the love, the distance, the silence, the moments that tested us,",
            "and the moments that reminded me why my heart chose you in the first place.",
            "Loving you hasn‚Äôt always been easy, but it has always been real.",
            "And real love stays, even when things feel heavy.",
            "",
            "You became more than just someone I love‚Ä¶ you became someone I feel.",
            "In my quiet moments, in my prayers, in the future I imagine you‚Äôre there",
            "cz having a woman who‚Äôs 100% down for you while you‚Äôre trying to build yourself",
            "is something money can‚Äôt buy.",
            "Even when we don‚Äôt speak, my heart never stops talking to yours.",
            "",
            "Today marks a new year with that precious soul of yours,",
            "our Fourth month anniversary and absolute change of life",
            "and also more blessings in our life together as one",
            "so let these days and distance strengthen us",
            "and motivate us to work so hard for our family",
            "kd Imana ikomeze kuguha umugisha mubyo ukora byose‚ù§Ô∏è‚ù§Ô∏è",
            "",
            "This new year, I don‚Äôt just wish you happiness",
            "I wish you peace in your soul, strength on hard days,",
            "and the confidence to know how deeply you are loved.",
            "I promise to keep choosing you, to love you with patience, honesty,",
            "and a heart that doesn‚Äôt give up easily.",
            "I‚Äôm not perfect, but my love for you is sincere.",
            "",
            "If life pulls us apart sometimes, know this:",
            "my intention has always been you.",
            "And as this year ends and another begins,",
            "my heart steps into it holding your name gently,",
            "hoping, believing, and loving you even more than before.",
            "",
            "Happy New Year, my love.",
            "I‚Äôm here. I‚Äôm yours. And I‚Äôm not going anywhere.",
            "I love you to the stars and beyond ü´Çü§ç‚ú®"
        ].join('\n');

        function init() {
            bgCanvas = document.getElementById('canvas-bg');
            bgCtx = bgCanvas.getContext('2d');
            heartCanvas = document.getElementById('heart-canvas');
            heartCtx = heartCanvas.getContext('2d');

            // Force loop fix for video
            
            
            window.addEventListener('resize', resize);
            resize();
            drawScene();
        }

        function resize() {
            width = bgCanvas.width = window.innerWidth;
            height = bgCanvas.height = window.innerHeight;
            heartCanvas.width = heartCanvas.parentElement.offsetWidth;
            heartCanvas.height = heartCanvas.parentElement.offsetHeight;
            
            initStars();
            initSnow();
            initHeartPoints();
            //initOrbitingParticles();
        }

        function initStars() {
            stars = [];
            for (let i = 0; i < 350; i++) {
                stars.push({
                    x: Math.random() * width - width / 2,
                    y: Math.random() * height - height / 2,
                    z: Math.random() * width,
                    o: Math.random()
                });
            }
        }

        function initSnow() {
            snowflakes = [];
            for (let i = 0; i < 120; i++) {
                snowflakes.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    r: Math.random() * 2 + 1,
                    d: Math.random() * 1,
                    s: Math.random() * 0.7 + 0.3
                });
            }
        }

        function initHeartPoints() {
            heartPoints = [];
            const hw = heartCanvas.width;
            const hh = heartCanvas.height;
            const scale = Math.min(hw * 0.85, hh * 0.7) / 32;
            for (let t = 0; t <= 2 * Math.PI; t += 0.01) {
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
                heartPoints.push({ x: x * scale, y: y * scale });
            }
        }

        function initOrbitingParticles() {
            orbitingParticles = [];
            for (let i = 0; i < 1500; i++) {
                const t = Math.random() * Math.PI * 2;
                orbitingParticles.push({
                    t: t,
                    size: Math.random() * 1.5,
                    v: Math.random() * 0.01 + 0.005
                });
            }
        }

        function drawScene() {
            bgCtx.clearRect(0, 0, width, height);

            // Stars
            bgCtx.save();
            bgCtx.translate(width / 2, height / 2);
            stars.forEach(s => {
                s.z -= 0.5;
                if (s.z <= 0) s.z = width;
                let sx = s.x * (width / s.z);
                let sy = s.y * (width / s.z);
                let size = (1 - s.z / width) * 2;
                bgCtx.fillStyle = `rgba(255, 255, 255, ${s.o * (1 - s.z / width)})`;
                bgCtx.beginPath(); bgCtx.arc(sx, sy, size, 0, Math.PI * 2); bgCtx.fill();
            });
            bgCtx.restore();

            // Snow
            bgCtx.fillStyle = "rgba(255, 255, 255, 0.6)";
            bgCtx.beginPath();
            snowflakes.forEach((p, i) => {
                bgCtx.moveTo(p.x, p.y);
                bgCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
                p.y += p.s;
                p.x += Math.sin(p.d) * 0.4;
                if (p.y > height) snowflakes[i].y = -10;
            });
            bgCtx.fill();

            requestAnimationFrame(drawScene);
        }

        function animateHeart() {
            heartCtx.clearRect(0, 0, heartCanvas.width, heartCanvas.height);
            heartCtx.save();
            heartCtx.translate(heartCanvas.width / 2, heartCanvas.height / 2);

            let pulse = 1;
            if (heartProgress >= 1) {
                pulse = 1 + 0.06 * Math.sin(Date.now() / 350);
                heartCtx.scale(pulse, pulse);
            }

            // Draw Outline
            heartCtx.beginPath();
            const count = Math.floor(heartPoints.length * Math.min(heartProgress, 1));
            if (count > 0) {
                heartCtx.moveTo(heartPoints[0].x, heartPoints[0].y);
                for (let i = 1; i < count; i++) {
                    heartCtx.lineTo(heartPoints[i].x, heartPoints[i].y);
                }
            }
            heartCtx.strokeStyle = '#ff1a1a';
            heartCtx.lineWidth = 3;
            heartCtx.shadowColor = '#ff1a1a';
            heartCtx.shadowBlur = 15;
            heartCtx.stroke();
            heartCtx.fillStyle = 'rgba(255, 0, 0, 0.03)';
            heartCtx.fill();

            // Draw Orbiting Particles (only after some progress)
            if (heartProgress > 0.5) {
                orbitingParticles.forEach(p => {
                    p.t += p.v;
                    const x = 16 * Math.pow(Math.sin(p.t), 3) * (heartCanvas.width / 45);
                    const y = -(13 * Math.cos(p.t) - 5 * Math.cos(2 * p.t) - 2 * Math.cos(3 * p.t) - Math.cos(4 * p.t)) * (heartCanvas.height / 45);
                    heartCtx.beginPath();
                    heartCtx.arc(x, y, p.size, 0, Math.PI * 2);
                    heartCtx.fillStyle = '#ff1a1a';
                    heartCtx.fill();
                });
            }

            heartCtx.restore();

            if (heartProgress < 1) heartProgress += 0.007;
            requestAnimationFrame(animateHeart);
        }

        function type() {
            const target = document.getElementById('poem-target');
            const scrollBox = document.getElementById('scroll-container');
            if (charIdx < poemLines.length) {
                if (poemLines[charIdx] === '\n') {
                    target.innerHTML += '<br>';
                } else {
                    target.innerHTML += poemLines[charIdx];
                }
                charIdx++;
                scrollBox.scrollTop = scrollBox.scrollHeight;
                setTimeout(type, 50);
            } else {
                target.innerHTML += '<span class="cursor"></span>';
            }
        }

        function startApp() {
            const overlay = document.getElementById('start-overlay');
            overlay.style.opacity = '0';
            const audio = document.getElementById("myAudio");
            
            
            audio.play().catch(() => {});
          

            document.querySelectorAll('.fragment').forEach((f, i) => {
                setTimeout(() => f.classList.add('exploded'), 200 + (i * 200));
            });

            setTimeout(() => {
                overlay.style.display = 'none';
                animateHeart();
                setTimeout(type, 1000);
            }, 1000);
        }

        window.onload = init;
    </script>
</body>
</html>